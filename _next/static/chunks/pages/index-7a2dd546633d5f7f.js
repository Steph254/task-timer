(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3574)}])},9116:function(e,t,n){"use strict";var r=n(5893);t.Z=function(e){var t,n=e.children,s=e.type,a=e.key,c=e.extraClasses;switch(s){case"success":t="bg-blue-500";break;case"warning":t="bg-yellow-300 text-yellow-800";break;default:t="bg-red-500"}var o="text-white text-center p-2 rounded mt-4 ".concat(t," ").concat(c);return(0,r.jsx)("div",{className:o,children:n},a)}},7543:function(e,t,n){"use strict";var r=n(5893);t.Z=function(e){var t,n=e.children,s=e.color,a=e.handleClick,c=e.type,o=e.extraClasses;switch(s){case"primary":t="bg-blue-500 hover:bg-blue-600";break;case"success":t="bg-green-500 hover:bg-green-600";break;case"warning":t="bg-yellow-300 hover:bg-yellow-400 text-black";break;case"secondary":t="bg-pink-500 hover:bg-pink-600";break;default:t="bg-red-500 hover:bg-red-600"}var i="rounded text-white py-2 px-4 ".concat(t," ").concat(o);return(0,r.jsx)("button",{className:i,onClick:a,type:c,children:n})}},8644:function(e,t,n){"use strict";var r=n(5893),s=n(1664),a=n.n(s);t.Z=function(e){var t=e.href,n=e.children;return(0,r.jsx)(a(),{href:t,children:(0,r.jsx)("a",{className:"underline underline-offset-1 text-blue-700",children:n})})}},3574:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),s=n(7294),a=n(3967),c=function(){var e=(0,s.useState)(!1),t=e[0],n=e[1],r=(0,s.useState)(0),a=r[0],c=r[1],o=(0,s.useRef)(null);return{isTimerOn:t,seconds:a,setSeconds:c,startTimer:function(){n(!0);var e=setInterval((function(){c((function(e){return e+1}))}),1e3);o.current=e},pauseTimer:function(){n(!1),clearInterval(o.current)}}},o=n(4051),i=n.n(o),u=n(6008);function l(e,t,n,r,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,s)}var d=function(){var e,t=(e=i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={operation:"insert",schema:"productivity_timer",table:"tasks",records:[{username:t,task_name:n,time_in_seconds:0}]},e.next=3,(0,u.n)(r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){l(a,r,s,c,o,"next",e)}function o(e){l(a,r,s,c,o,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),f=n(3040),m=n(7543);function h(e,t,n,r,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,s)}var v=function(e){var t=e.selectedTaskId,n=e.setSelectedTaskId,c=e.setErrorMessage,o=e.setSeconds,u=e.pauseTimer,l=(0,s.useContext)(a.S).username,v=(0,s.useContext)(f.S),p=v.tasks,x=v.getAndSetTasks,k=(0,s.useState)(!1),g=k[0],y=k[1],b=(0,s.useState)(""),w=b[0],T=b[1],j=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(l,w);case 3:200===e.sent.response.status?x(l):c("Whoops, something went wrong"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),c("Whoops, something went wrong");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){h(a,r,s,c,o,"next",e)}function o(e){h(a,r,s,c,o,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=function(){T(""),y(!1)};return(0,r.jsx)("div",{children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:"Enter task here...",value:w,onChange:function(e){T(e.target.value)},className:"border p-2 mr-2"}),(0,r.jsx)(m.Z,{color:"success",handleClick:function(){""!==w.trim()?(j(),S()):c("Type a task!")},children:"Add task"}),(0,r.jsx)(m.Z,{color:"secondary",handleClick:function(){return y(!1)},extraClasses:"ml-1",children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("select",{className:"mr-4 p-2 border",name:"task",id:"task",onChange:function(e){c(""),n(e.target.value),o(0),u()},children:[""===t&&(0,r.jsx)("option",{disabled:!0,selected:!0,value:"",hidden:!0,children:"-- Select a task --"}),p.map((function(e){return(0,r.jsx)("option",{value:e.id,selected:e.id===t,children:e.task_name},e.id)}))]}),(0,r.jsx)(m.Z,{handleClick:function(){return y(!0)},color:"success",children:"New Task"})]})})},p=n(4491);function x(e,t,n,r,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,s)}var k=function(){var e,t=(e=i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={operation:"sql",sql:"UPDATE productivity_timer.tasks SET time_in_seconds = '".concat(n,"' WHERE id = '").concat(t,"'")},e.next=3,(0,u.n)(r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){x(a,r,s,c,o,"next",e)}function o(e){x(a,r,s,c,o,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,s)}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=e.seconds,n=e.setSeconds,c=e.isTimerOn,o=e.startTimer,u=e.pauseTimer,l=e.setErrorMessage,d=e.selectedTaskId,h=e.selectedTaskName,v=e.setRecentTaskTimes,x=(0,s.useContext)(f.S),g=x.tasks,w=x.getAndSetTasks,T=(0,s.useContext)(a.S).username,j=(0,p.mr)(t),S=j.formattedHours,C=j.formattedMins,N=j.formattedSecs,_=function(){var e,r=(e=i().mark((function e(){var r,s,a,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),r=P(d),s=r+t,e.next=5,k(d,s);case 5:a=e.sent,c=a.response,o=a.result,200===c.status?(w(T),n(0),v((function(e){return[{name:h,seconds:t}].concat(b(e))}))):l("Whoops, something went wrong :("),console.log({response:c,result:o});case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){y(a,r,s,c,o,"next",e)}function o(e){y(a,r,s,c,o,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}(),P=function(e){var t=g.find((function(t){return t.id===e}));return t?t.time_in_seconds:0};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mt-8 border-2 border-gray-500 rounded p-14 text-5xl",children:[S," : ",C," : ",N]}),(0,r.jsxs)("div",{className:"flex justify-center mt-10",children:[c?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.Z,{color:"warning",handleClick:u,children:"Pause"})}):(0,r.jsx)(m.Z,{color:"success",handleClick:function(){l(""),""==d?l("Please select a task"):o()},children:"Start"}),(t>0||c)&&(0,r.jsx)(m.Z,{color:"danger",handleClick:_,extraClasses:"ml-4",children:"Log time"})]}),(t>0||c)&&(0,r.jsx)("button",{onClick:function(){u(),n(0)},className:"underline underline-offset-2 mt-8 cursor-pointer text-gray-500 mx-auto block",children:"Reset"})]})},T=n(9116),j=n(8644),S=function(e){var t=e.recentTaskTimes;return(0,r.jsx)("div",{className:"mt-8 max-h-56 overflow-y-auto px-8",children:t.map((function(e,t){return(0,r.jsx)("div",{className:"flex shadow rounded px-8 py-4 mt-2",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-green-600",children:e.seconds})," seconds added to"," ",(0,r.jsx)("span",{className:"text-green-600",children:e.name})]})},t)}))})},C=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],o=(0,s.useState)(""),i=o[0],u=o[1],l=(0,s.useState)(""),d=l[0],f=l[1],m=(0,s.useState)([]),h=m[0],p=m[1],x=c(),k=x.isTimerOn,g=x.seconds,y=x.setSeconds,b=x.startTimer,C=x.pauseTimer,N=(0,s.useContext)(a.S).username;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-4 grow",children:[!N&&(0,r.jsxs)(T.Z,{type:"warning",extraClasses:"mb-12",children:["Please ",(0,r.jsx)(j.Z,{href:"/login",children:"log in"})," or"," ",(0,r.jsx)(j.Z,{href:"/signup",children:"create an account"})," to use Super Productivity Timer"]}),(0,r.jsx)(v,{selectedTaskId:t,setSelectedTaskId:n,setSelectedTaskName:u,setErrorMessage:f,setSeconds:y,pauseTimer:C}),(0,r.jsx)(w,{seconds:g,setSeconds:y,setRecentTaskTimes:p,selectedTaskName:i,isTimerOn:k,startTimer:b,pauseTimer:C,setErrorMessage:f,selectedTaskId:t}),d&&(0,r.jsx)("div",{className:"text-red-500 mt-4",children:d}),h.length>0&&(0,r.jsx)(S,{recentTaskTimes:h})]})}},4491:function(e,t,n){"use strict";n.d(t,{Td:function(){return a},dP:function(){return s},mr:function(){return c}});var r=3600,s=function(e){var t=c(e),n=t.formattedHours,r=t.formattedMins,s=t.formattedSecs;return"".concat(n,"h ").concat(r,"m ").concat(s,"s")},a=function(e){return new Date(e).toLocaleDateString()},c=function(e){var t=i(e),n=t.hours,r=t.mins,s=t.secs;return{formattedHours:o(n),formattedMins:o(r),formattedSecs:o(s)}},o=function(e){return e<10?"0".concat(e):"".concat(e)},i=function(e){return{hours:u(e),mins:l(e),secs:d(e)}},u=function(e){return Math.floor(e/r)},l=function(e){return Math.floor(e%r/60)},d=function(e){return Math.floor(e%r%60)}}},function(e){e.O(0,[774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);