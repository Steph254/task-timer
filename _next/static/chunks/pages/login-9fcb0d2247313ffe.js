(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(9237)}])},9116:function(e,n,r){"use strict";var t=r(5893);n.Z=function(e){var n,r=e.children,a=e.type,s=e.key,o=e.extraClasses;switch(a){case"success":n="bg-blue-500";break;case"warning":n="bg-yellow-300 text-yellow-800";break;default:n="bg-red-500"}var u="text-white text-center p-2 rounded mt-4 ".concat(n," ").concat(o);return(0,t.jsx)("div",{className:u,children:r},s)}},7543:function(e,n,r){"use strict";var t=r(5893);n.Z=function(e){var n,r=e.children,a=e.color,s=e.handleClick,o=e.type,u=e.extraClasses;switch(a){case"primary":n="bg-blue-500 hover:bg-blue-600";break;case"success":n="bg-green-500 hover:bg-green-600";break;case"warning":n="bg-yellow-300 hover:bg-yellow-400 text-black";break;case"secondary":n="bg-pink-500 hover:bg-pink-600";break;default:n="bg-red-500 hover:bg-red-600"}var c="rounded text-white py-2 px-4 ".concat(n," ").concat(u);return(0,t.jsx)("button",{className:c,onClick:s,type:o,children:r})}},1553:function(e,n,r){"use strict";r.d(n,{h:function(){return a}});var t=r(5893),a=function(e){var n=e.label,r=e.inputType,a=e.inputName,o=e.handleChange,u=e.value;return(0,t.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,t.jsx)("label",{htmlFor:"name",children:n}),(0,t.jsx)(s,{inputType:r,inputName:a,handleChange:o,value:u})]})},s=function(e){var n=e.inputType,r=e.inputName,a=e.handleChange,s=e.value;return(0,t.jsx)("input",{className:"px-3 py-2 border-gray-200 border-2 rounded",type:n,name:r,id:r,onChange:a,value:s})}},8923:function(e,n,r){"use strict";var t=r(5893);n.Z=function(e){var n=e.children,r="text-4xl text-green-900 font-semibold "+e.extraClasses;return(0,t.jsx)("h1",{className:r,children:n})}},9237:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return v}});var t=r(5893),a=r(7294),s=r(3967),o=r(8923),u=r(4051),c=r.n(u),i=r(1553),l=r(7543),d=r(9116),p=r(3916);function h(e,n,r,t,a,s,o){try{var u=e[s](o),c=u.value}catch(i){return void r(i)}u.done?n(c):Promise.resolve(c).then(t,a)}var f=function(){var e=(0,a.useState)(""),n=e[0],r=e[1],o=(0,a.useState)(""),u=o[0],f=o[1],v=(0,a.useState)(""),x=v[0],m=v[1],b=(0,a.useContext)(s.S),g=function(){var e,r=(e=c().mark((function e(r){var t,a,s,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),m(""),n&&u){e.next=5;break}return m("Username and password required"),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,p.q)(n,u);case 8:t=e.sent,a=t.response,s=t.result,o=a.status,i=s.operation_token,200===o&&i?w(n,i):m(401===o?"Check your username and password are correct":"Whoops, something went wrong :("),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0),m("Whoops, something went wrong :(");case 20:case"end":return e.stop()}}),e,null,[[5,16]])})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function o(e){h(s,t,a,o,u,"next",e)}function u(e){h(s,t,a,o,u,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),w=function(e,n){b.setUsername(e),localStorage.setItem("access_token",n)};return(0,t.jsxs)("form",{className:"w-full sm:w-96",onSubmit:g,children:[(0,t.jsx)(i.h,{label:"Username",inputType:"text",inputName:"username",handleChange:function(e){return r(e.target.value)},value:n}),(0,t.jsx)(i.h,{label:"Password",inputType:"password",inputName:"password",handleChange:function(e){return f(e.target.value)},value:u}),(0,t.jsx)(l.Z,{color:"primary",extraClasses:"w-full mt-3 py-3 font-semibold",children:"Login"}),x&&(0,t.jsx)(d.Z,{type:"danger",children:x})]})},v=function(){var e=(0,a.useContext)(s.S).username;return(0,t.jsx)("div",{className:"grow flex flex-col items-center mt-20",children:e?(0,t.jsxs)("p",{children:["You are logged in as"," ",(0,t.jsx)("span",{className:"text-blue-600 font-bold",children:e})," \ud83d\udc4b"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{extraClasses:"text-center mb-8",children:"Log in"}),(0,t.jsx)(f,{})]})})}},3916:function(e,n,r){"use strict";r.d(n,{q:function(){return u}});var t=r(4051),a=r.n(t),s=r(156);function o(e,n,r,t,a,s,o){try{var u=e[s](o),c=u.value}catch(i){return void r(i)}u.done?n(c):Promise.resolve(c).then(t,a)}var u=function(){var e,n=(e=a().mark((function e(n,r){var t,o,u,c,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s._){e.next=3;break}throw console.log("Error: DB_URL undefined"),"Internal server error";case 3:return(t=new Headers).append("Content-Type","application/json"),o=JSON.stringify({operation:"create_authentication_tokens",username:n,password:r}),u={method:"POST",headers:t,body:o,redirect:"follow"},e.next=9,fetch(s._,u);case 9:return c=e.sent,e.next=12,c.json();case 12:return i=e.sent,e.abrupt("return",{response:c,result:i});case 14:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function u(e){o(s,t,a,u,c,"next",e)}function c(e){o(s,t,a,u,c,"throw",e)}u(void 0)}))});return function(e,r){return n.apply(this,arguments)}}()}},function(e){e.O(0,[774,888,179],(function(){return n=3236,e(e.s=n);var n}));var n=e.O();_N_E=n}]);