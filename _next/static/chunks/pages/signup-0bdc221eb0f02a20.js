(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{7805:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return t(712)}])},9116:function(e,n,t){"use strict";var r=t(5893);n.Z=function(e){var n,t=e.children,a=e.type,s=e.key,u=e.extraClasses;switch(a){case"success":n="bg-blue-500";break;case"warning":n="bg-yellow-300 text-yellow-800";break;default:n="bg-red-500"}var o="text-white text-center p-2 rounded mt-4 ".concat(n," ").concat(u);return(0,r.jsx)("div",{className:o,children:t},s)}},7543:function(e,n,t){"use strict";var r=t(5893);n.Z=function(e){var n,t=e.children,a=e.color,s=e.handleClick,u=e.type,o=e.extraClasses;switch(a){case"primary":n="bg-blue-500 hover:bg-blue-600";break;case"success":n="bg-green-500 hover:bg-green-600";break;case"warning":n="bg-yellow-300 hover:bg-yellow-400 text-black";break;case"secondary":n="bg-pink-500 hover:bg-pink-600";break;default:n="bg-red-500 hover:bg-red-600"}var c="rounded text-white py-2 px-4 ".concat(n," ").concat(o);return(0,r.jsx)("button",{className:c,onClick:s,type:u,children:t})}},1553:function(e,n,t){"use strict";t.d(n,{h:function(){return a}});var r=t(5893),a=function(e){var n=e.label,t=e.inputType,a=e.inputName,u=e.handleChange,o=e.value;return(0,r.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,r.jsx)("label",{htmlFor:"name",children:n}),(0,r.jsx)(s,{inputType:t,inputName:a,handleChange:u,value:o})]})},s=function(e){var n=e.inputType,t=e.inputName,a=e.handleChange,s=e.value;return(0,r.jsx)("input",{className:"px-3 py-2 border-gray-200 border-2 rounded",type:n,name:t,id:t,onChange:a,value:s})}},8923:function(e,n,t){"use strict";var r=t(5893);n.Z=function(e){var n=e.children,t="text-4xl text-green-900 font-semibold "+e.extraClasses;return(0,r.jsx)("h1",{className:t,children:n})}},712:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var r=t(5893),a=t(7294),s=t(4051),u=t.n(s),o=t(1553),c=t(7543);function i(e,n,t,r,a,s,u){try{var o=e[s](u),c=o.value}catch(i){return void t(i)}o.done?n(c):Promise.resolve(c).then(r,a)}var l=function(){var e,n=(e=u().mark((function e(n,t){var r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=3,fetch(t,r);case 3:return a=e.sent,e.next=6,a.json();case 6:return s=e.sent,e.abrupt("return",{response:a,result:s});case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function u(e){i(s,r,a,u,o,"next",e)}function o(e){i(s,r,a,u,o,"throw",e)}u(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),p=t(9116),d=t(3967),f=t(1163),h=t(3916);function v(e,n,t,r,a,s,u){try{var o=e[s](u),c=o.value}catch(i){return void t(i)}o.done?n(c):Promise.resolve(c).then(r,a)}var x=function(){var e=(0,a.useState)(""),n=e[0],t=e[1],s=(0,a.useState)(""),i=s[0],x=s[1],m=(0,a.useState)(""),b=m[0],g=m[1],w=(0,a.useState)(""),y=w[0],k=w[1],j=(0,a.useContext)(d.S),C=(0,f.useRouter)(),N=function(){var e,t=(e=u().mark((function e(t){var r,a,s,o,c,p,d,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(""),r={username:n,password1:i,password2:b},e.next=5,l(r,"/api/signup");case 5:if(a=e.sent,s=a.response,o=a.result,200===s.status){e.next=11;break}return k(o.error),e.abrupt("return");case 11:return e.prev=11,e.next=14,(0,h.q)(n,i);case 14:c=e.sent,p=c.response,d=c.result,f=d.operation_token,200===p.status&&f?_(n,f):C.push("/login"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.log(e.t0),k("Whoops, something went wrong :(");case 25:case"end":return e.stop()}}),e,null,[[11,21]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function u(e){v(s,r,a,u,o,"next",e)}function o(e){v(s,r,a,u,o,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}(),_=function(e,n){j.setUsername(e),localStorage.setItem("access_token",n)};return(0,r.jsxs)("form",{className:"w-full sm:w-96",onSubmit:N,children:[(0,r.jsx)(o.h,{label:"Username",inputType:"text",inputName:"username",handleChange:function(e){return t(e.target.value)},value:n}),(0,r.jsx)(o.h,{label:"Password",inputType:"password",inputName:"password1",handleChange:function(e){return x(e.target.value)},value:i}),(0,r.jsx)(o.h,{label:"Confirm password",inputType:"password",inputName:"password2",handleChange:function(e){return g(e.target.value)},value:b}),(0,r.jsx)(c.Z,{color:"primary",type:"submit",extraClasses:"w-full mt-3 py-3 font-semibold",children:"Create Account"}),function(){if(0!==y.length)return"string"===typeof y?(0,r.jsx)(p.Z,{type:"danger",children:y}):y.map((function(e,n){return(0,r.jsx)(p.Z,{type:"danger",children:e},n)}))}()]})},m=t(8923),b=function(){var e=(0,a.useContext)(d.S).username;return(0,r.jsx)("div",{className:"mx-auto mt-20",children:e?(0,r.jsxs)(p.Z,{type:"success",children:["You are logged in as ",e]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{extraClasses:"text-center mb-8",children:"Create an account"}),(0,r.jsx)(x,{})]})})}},3916:function(e,n,t){"use strict";t.d(n,{q:function(){return o}});var r=t(4051),a=t.n(r),s=t(156);function u(e,n,t,r,a,s,u){try{var o=e[s](u),c=o.value}catch(i){return void t(i)}o.done?n(c):Promise.resolve(c).then(r,a)}var o=function(){var e,n=(e=a().mark((function e(n,t){var r,u,o,c,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s._){e.next=3;break}throw console.log("Error: DB_URL undefined"),"Internal server error";case 3:return(r=new Headers).append("Content-Type","application/json"),u=JSON.stringify({operation:"create_authentication_tokens",username:n,password:t}),o={method:"POST",headers:r,body:u,redirect:"follow"},e.next=9,fetch(s._,o);case 9:return c=e.sent,e.next=12,c.json();case 12:return i=e.sent,e.abrupt("return",{response:c,result:i});case 14:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function o(e){u(s,r,a,o,c,"next",e)}function c(e){u(s,r,a,o,c,"throw",e)}o(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()},1163:function(e,n,t){e.exports=t(880)}},function(e){e.O(0,[774,888,179],(function(){return n=7805,e(e.s=n);var n}));var n=e.O();_N_E=n}]);